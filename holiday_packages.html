<!DOCTYPE html>
<html lang="sw">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Hub | Embarway Secondary</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-green: #1b3d17;
            --accent-green: #4ade80;
            --dark-bg: #0f1113;
            --blue-glow: #3498db;
            --red-glow: #ff4d4d;
            --glass: rgba(255, 255, 255, 0.07);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top, var(--primary-green), var(--dark-bg));
            color: white;
            margin: 0;
            padding: 15px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: auto;
        }

        header {
            text-align: center;
            margin: 20px 0;
        }

        .info-card {
            background: var(--glass);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        label {
            font-size: 0.85rem;
            opacity: 0.8;
            display: block;
            margin-top: 10px;
        }

        input,
        select {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            outline: none;
            box-sizing: border-box;
        }

        /* Progress Bar Section */
        .progress-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 12px;
            margin-top: 10px;
        }

        .bar-bg {
            height: 22px;
            background: #222;
            border-radius: 11px;
            overflow: hidden;
            margin-top: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #progressBar {
            height: 100%;
            width: 0%;
            background: var(--red-glow);
            transition: width 0.5s ease, background 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        /* Subject Items */
        .subject-list {
            display: none;
            margin-top: 25px;
        }

        .subject-item {
            background: var(--glass);
            margin-bottom: 12px;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .subject-name {
            font-weight: 600;
            color: var(--accent-green);
            flex: 1;
            min-width: 150px;
        }

        .action-btns {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn-dl {
            background: #3498db;
            color: white;
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .upload-wrapper {
            background: rgba(255, 255, 255, 0.05);
            padding: 5px 10px;
            border-radius: 6px;
            border: 1px dashed #666;
        }

        .btn-send {
            background: var(--accent-green);
            color: black;
            border: none;
            padding: 8px 18px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-send.done {
            background: var(--blue-glow) !important;
            color: white;
        }

        #congrats {
            display: none;
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-green);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            margin-top: 15px;
            border: 1px solid var(--accent-green);
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h2 style="margin:0;">Embarway Assignment Hub</h2>
            <p style="font-size: 0.8rem; opacity: 0.7;">Kamilisha masomo yako na upate asilimia 100%</p>
        </header>

        <div class="info-card">
            <label>Majina Yako Matatu</label>
            <input type="text" id="stuName" placeholder="Mfano: Juma Shabaan Mwinyi">

            <label>Chagua Kidato</label>
            <select id="classSelect" onchange="showSubjects()">
                <option value="">-- Chagua Darasa --</option>
                <option value="f1">Form One</option>
                <option value="f2">Form Two</option>
                <option value="f3">Form Three</option>
                <option value="f4">Form Four</option>
                <option value="f5">Form Five</option>
                <option value="f6">Form Six</option>
            </select>

            <div class="progress-section">
                <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                    <span id="statusText">Maendeleo: 0%</span>
                    <span id="counterText">0/0 Masomo</span>
                </div>
                <div class="bar-bg">
                    <div id="progressBar">0%</div>
                </div>
                <div id="congrats">ðŸŽ‰ HONGERA! UMEKAMILISHA KAZI ZOTE! ðŸŽ‰</div>
            </div>
        </div>

        <div id="subjectDisplay" class="subject-list">
            <h3 id="classTitle"
                style="font-size: 1rem; border-left: 4px solid var(--accent-green); padding-left: 10px;"></h3>
            <div id="listItems"></div>
        </div>
    </div>

    <script>
        const data = {
            f1: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "BUSINESS STUDIES", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMPUTER SCIENCE", "HISTORIA YA TANZANIA NA MAADILI"],
            f2: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "BUSINESS STUDIES", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMPUTER SCIENCE", "HISTORIA YA TANZANIA NA MAADILI"],
            f3: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "CIVICS", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMMERCE"],
            f4: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "CIVICS", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMMERCE"],
            f5: [
                "History 1", "History 2", "Geography 1", "Geography 2", "Language 1", "Language 2", "Kiswahili 1", "Kiswahili 2",
                "Economics 1", "Economics 2", "Literature in English 1", "Literature in English 2", "Chemistry 1", "Chemistry 2",
                "Biology 1", "Biology 2", "Fasihi 1", "Fasihi 2", "Historia ya Tanzania na Maadili", "BAM"
            ],
            f6: [
                "History 1", "History 2", "Geography 1", "Geography 2", "Language 1", "Language 2", "Kiswahili 1", "Kiswahili 2",
                "Economics 1", "Economics 2", "Chemistry 1", "Chemistry 2", "Biology 1", "Biology 2", "General Studies (GS)", "BAM"
            ]
        };

        let completedSubjects = new Set();
        let targetNeeded = 0;

        function showSubjects() {
            const cls = document.getElementById('classSelect').value;
            const name = document.getElementById('stuName').value;
            const display = document.getElementById('subjectDisplay');
            const listItems = document.getElementById('listItems');
            const classTitle = document.getElementById('classTitle');

            if (!name || name.trim().split(" ").length < 3) {
                alert("Tafadhali andika majina yako matatu kwanza!");
                document.getElementById('classSelect').value = "";
                return;
            }

            if (cls) {
                display.style.display = "block";
                listItems.innerHTML = "";
                completedSubjects.clear();
                const selectedText = document.getElementById('classSelect').options[document.getElementById('classSelect').selectedIndex].text;
                classTitle.innerText = "Orodha ya Masomo - " + selectedText;

                targetNeeded = (cls === 'f5' || cls === 'f6') ? 6 : 7;

                updateProgress();

                data[cls].forEach((sub, index) => {
                    listItems.innerHTML += `
                <div class="subject-item">
                    <div class="subject-name">${sub}</div>
                    <div class="action-btns">
                        <a href="#" class="btn-dl">â¬‡ Pakua</a>
                        <button class="btn-send" id="btn-${index}" onclick="tumaKazi('${sub}', ${index})">Tuma</button>
                    </div>
                </div>`;
                });
            } else {
                display.style.display = "none";
            }
        }

        function tumaKazi(sub, index) {
            const fileInput = document.getElementById(`file-${index}`);
            const btn = document.getElementById(`btn-${index}`);
            const name = document.getElementById('stuName').value;
            const clsElement = document.getElementById('classSelect');
            const className = clsElement.options[clsElement.selectedIndex].text;


            // --- SEHEMU YA WHATSAPP ---
            const phone = "255783243745";
            const text = `*KAZI YA LIKIZO - EMBARWAY*%0A` +
                `--------------------------%0A` +
                `*Mwanafunzi:* ${name}%0A` +
                `*Kidato:* ${className}%0A` +
                `*Somo:* ${sub}%0A` +
                `--------------------------%0A` +
                `Nimeambatanisha picha za kazi yangu hapa chini:`;

            const waLink = `https://wa.me/${phone}?text=${text}`;

            // Fungua WhatsApp
            window.open(waLink, '_blank');

            // Update Progress UI
            if (!completedSubjects.has(sub)) {
                completedSubjects.add(sub);
                btn.classList.add('done');
                btn.innerText = "âœ“ Tayari";
                btn.disabled = true;
                updateProgress();
            }
        }

        function updateProgress() {
            const bar = document.getElementById('progressBar');
            const statusText = document.getElementById('statusText');
            const counterText = document.getElementById('counterText');
            const congrats = document.getElementById('congrats');

            let percent = Math.round((completedSubjects.size / targetNeeded) * 100);
            if (percent > 100) percent = 100;

            bar.style.width = percent + "%";
            bar.innerText = percent + "%";
            statusText.innerText = `Maendeleo: ${percent}%`;
            counterText.innerText = `${completedSubjects.size}/${targetNeeded} Masomo Muhimu`;

            if (percent >= 100) {
                bar.style.background = "var(--blue-glow)";
                congrats.style.display = "block";
            } else if (percent > 0) {
                bar.style.background = `linear-gradient(90deg, var(--red-glow), var(--blue-glow) ${percent}%)`;
                congrats.style.display = "none";
            } else {
                bar.style.background = "var(--red-glow)";
                congrats.style.display = "none";
            }
        }
    </script>
</body>

</html>