<!DOCTYPE html>
<html lang="sw">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holiday Hub | Embarway Secondary</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary-green: #1b3d17;
            --accent-green: #4ade80;
            --dark-bg: #0f1113;
            --blue-glow: #3498db;
            --red-glow: #ff4d4d;
            --glass: rgba(255, 255, 255, 0.07);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top, var(--primary-green), var(--dark-bg));
            color: white;
            margin: 0;
            padding: 15px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: auto;
        }

        header {
            text-align: center;
            margin: 20px 0;
        }

        .info-card {
            background: var(--glass);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        label {
            font-size: 0.85rem;
            opacity: 0.8;
            display: block;
            margin-top: 15px;
        }

        input,
        select {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            outline: none;
            box-sizing: border-box;
        }

        .progress-section {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .bar-bg {
            height: 22px;
            background: #222;
            border-radius: 11px;
            overflow: hidden;
            margin-top: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #progressBar {
            height: 100%;
            width: 0%;
            background: var(--red-glow);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        .home-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 45px;
            height: 45px;
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-green);
            text-decoration: none;
            font-size: 1.2rem;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        .home-btn:hover {
            background: var(--accent-green);
            color: var(--primary-green);
            transform: translateY(-3px);
            box-shadow: 0 0 15px var(--accent-green);
        }

        /* Kuficha maandishi kwenye simu ndogo ili isizibe screen */
        .home-btn span {
            display: none;
            font-size: 0.8rem;
            margin-left: 8px;
            font-weight: 600;
        }

        @media (min-width: 768px) {
            .home-btn {
                width: auto;
                padding: 0 15px;
            }

            .home-btn span {
                display: inline;
            }
        }

        .subject-list {
            display: none;
            margin-top: 25px;
        }

        .subject-item {
            background: var(--glass);
            margin-bottom: 12px;
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .subject-info {
            flex: 1;
            min-width: 150px;
        }

        .subject-name {
            font-weight: 600;
            color: var(--accent-green);
            display: block;
        }

        .teacher-contact {
            font-size: 0.7rem;
            opacity: 0.6;
            font-style: italic;
        }

        .btn-dl {
            background: #3498db;
            color: white;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .btn-send {
            background: var(--accent-green);
            color: black;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
        }

        .btn-send.done {
            background: var(--blue-glow) !important;
            color: white;
        }

        #congrats {
            display: none;
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-green);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
            border: 1px solid var(--accent-green);
        }
    </style>
</head>

<body>
    <a href="index.html" class="home-btn">
        <i class="fas fa-home"></i>
        <span>Rudi Nyumbani</span>
    </a>
    <div class="container">
        <header>
            <h2 style="margin:0;">Embarway Assignment Hub</h2>
            <p style="font-size: 0.8rem; opacity: 0.7;">Tuma kazi zako kwa walimu husika kwa haraka</p>
        </header>

        <div class="info-card">
            <label>Majina Yako Matatu</label>
            <input type="text" id="stuName" placeholder="Mfano: Juma Shabaan Mwinyi">

            <label>Chagua Kidato</label>
            <select id="classSelect" onchange="toggleSections(); showSubjects();">
                <option value="">-- Chagua Darasa --</option>
                <option value="f1">Form One</option>
                <option value="f2">Form Two</option>
                <option value="f3">Form Three</option>
                <option value="f4">Form Four</option>
                <option value="f5">Form Five</option>
                <option value="f6">Form Six</option>
            </select>

            <div id="streamSection" style="display: none;">
                <label>Chagua Mkondo</label>
                <select id="streamSelect">
                    <option value="">-- Chagua Mkondo --</option>
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E</option>
                </select>
            </div>

            <div id="combiSection" style="display: none;">
                <label>Chagua Combination</label>
                <select id="combiSelect">
                    <option value="">-- Chagua Combination --</option>
                    <option value="HGL">HGL</option>
                    <option value="HGK">HGK</option>
                    <option value="HGE">HGE</option>
                    <option value="HGLi">HGLi</option>
                    <option value="CBG">CBG</option>
                    <option value="HKL">HKL</option>
                    <option value="HGFa">HGFa</option>
                </select>
            </div>

            <div class="progress-section">
                <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                    <span id="statusText">Maendeleo: 0%</span>
                    <span id="counterText">0/0 Masomo</span>
                </div>
                <div class="bar-bg">
                    <div id="progressBar">0%</div>
                </div>
                <div id="congrats">ðŸŽ‰ HONGERA! KAZI ZOTE ZIMETUMWA! ðŸŽ‰</div>
            </div>
        </div>

        <div id="subjectDisplay" class="subject-list">
            <h3 id="classTitle"
                style="font-size: 1rem; border-left: 4px solid var(--accent-green); padding-left: 10px;"></h3>
            <div id="listItems"></div>
        </div>
    </div>

    <script>
        // HAPA NDIPO UNAPOBADILISHA NAMBA ZA WALIMU KWA KILA SOMO
        // Format ni "JINA LA SOMO": "Namba_ya_Simu"
        const nambaZaWalimu = {
            "PHYSICS": "255783243745",
            "CHEMISTRY": "255783243745",
            "BIOLOGY": "255783243745",
            "BASIC MATHEMATICS": "255783243745",
            "GEOGRAPHY": "255783243745",
            "HISTORY": "255783243745",
            "BUSINESS STUDIES": "255783243745",
            "ENGLISH": "255783243745",
            "KISWAHILI": "255783243745",
            "BOOK KEEPING": "255783243745",
            "COMPUTER SCIENCE": "255783243745",
            "HISTORIA YA TANZANIA NA MAADILI": "255783243745",
            "CIVICS": "255783243745",
            "COMMERCE": "255783243745",
            // Masomo ya A-Level
            "History 1": "255783243745", "History 2": "255783243745",
            "Geography 1": "255783243745", "Geography 2": "255783243745",
            "Language 1": "255783243745", "Language 2": "255783243745",
            "Kiswahili 1": "255783243745", "Kiswahili 2": "255783243745",
            "Economics 1": "255783243745", "Economics 2": "255783243745",
            "Literature in English 1": "255783243745", "Literature in English 2": "255783243745",
            "Chemistry 1": "255783243745", "Chemistry 2": "255783243745",
            "Biology 1": "255783243745", "Biology 2": "255783243745",
            "Fasihi 1": "255783243745", "Fasihi 2": "255783243745",
            "General Studies (GS)": "255783243745", "BAM": "255783243745"
        };

        const data = {
            f1: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "BUSINESS STUDIES", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMPUTER SCIENCE", "HISTORIA YA TANZANIA NA MAADILI"],
            f2: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "BUSINESS STUDIES", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMPUTER SCIENCE", "HISTORIA YA TANZANIA NA MAADILI"],
            f3: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "CIVICS", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMMERCE"],
            f4: ["PHYSICS", "CHEMISTRY", "BIOLOGY", "BASIC MATHEMATICS", "GEOGRAPHY", "HISTORY", "CIVICS", "ENGLISH", "KISWAHILI", "BOOK KEEPING", "COMMERCE"],
            f5: ["History 1", "History 2", "Geography 1", "Geography 2", "Language 1", "Language 2", "Kiswahili 1", "Kiswahili 2", "Economics 1", "Economics 2", "Literature in English 1", "Literature in English 2", "Chemistry 1", "Chemistry 2", "Biology 1", "Biology 2", "Fasihi 1", "Fasihi 2", "Historia ya Tanzania na Maadili", "BAM"],
            f6: ["History 1", "History 2", "Geography 1", "Geography 2", "Language 1", "Language 2", "Kiswahili 1", "Kiswahili 2", "Economics 1", "Economics 2", "Chemistry 1", "Chemistry 2", "Biology 1", "Biology 2", "General Studies (GS)", "BAM"]
        };

        let completedSubjects = new Set();
        let targetNeeded = 0;

        function toggleSections() {
            const cls = document.getElementById('classSelect').value;
            const streamDiv = document.getElementById('streamSection');
            const combiDiv = document.getElementById('combiSection');

            if (cls === 'f5' || cls === 'f6') {
                combiDiv.style.display = "block";
                streamDiv.style.display = "none";
            } else if (cls !== "") {
                streamDiv.style.display = "block";
                combiDiv.style.display = "none";
            } else {
                streamDiv.style.display = "none";
                combiDiv.style.display = "none";
            }
        }

        function showSubjects() {
            const cls = document.getElementById('classSelect').value;
            const name = document.getElementById('stuName').value;
            const display = document.getElementById('subjectDisplay');
            const listItems = document.getElementById('listItems');
            const classTitle = document.getElementById('classTitle');

            if (cls && (!name || name.trim().split(" ").length < 3)) {
                alert("Tafadhali andika majina yako matatu kwanza!");
                document.getElementById('classSelect').value = "";
                return;
            }

            if (cls) {
                display.style.display = "block";
                listItems.innerHTML = "";
                completedSubjects.clear();
                const selectedText = document.getElementById('classSelect').options[document.getElementById('classSelect').selectedIndex].text;
                classTitle.innerText = "Masomo - " + selectedText;

                targetNeeded = (cls === 'f5' || cls === 'f6') ? 6 : 7;
                updateProgress();

                data[cls].forEach((sub, index) => {
                    const teacherPhone = nambaZaWalimu[sub] || "255783243745";
                    listItems.innerHTML += `
                        <div class="subject-item">
                            <div class="subject-info">
                                <span class="subject-name">${sub}</span>
                                <span class="teacher-contact">Tuma kwa: ${teacherPhone}</span>
                            </div>
                            <div class="action-btns" style="display:flex; gap:10px;">
                                <a href="#" class="btn-dl">â¬‡ Pakua</a>
                                <button class="btn-send" id="btn-${index}" onclick="tumaKazi('${sub}', ${index})">Tuma</button>
                            </div>
                        </div>`;
                });
            } else {
                display.style.display = "none";
            }
        }

        function tumaKazi(sub, index) {
            const btn = document.getElementById(`btn-${index}`);
            const name = document.getElementById('stuName').value;
            const clsSelect = document.getElementById('classSelect');
            const className = clsSelect.options[clsSelect.selectedIndex].text;

            const stream = document.getElementById('streamSelect').value;
            const combi = document.getElementById('combiSelect').value;

            // Pata namba husika ya somo hili
            const phone = nambaZaWalimu[sub] || "255783243745";

            let extraInfo = "";
            if (combi) extraInfo = `*Combination:* ${combi}`;
            else if (stream) extraInfo = `*Mkondo:* ${stream}`;

            const text = `*KAZI YA LIKIZO - EMBARWAY*%0A` +
                `--------------------------%0A` +
                `*Mwanafunzi:* ${name}%0A` +
                `*Kidato:* ${className}%0A` +
                `${extraInfo}%0A` +
                `*Somo:* ${sub}%0A` +
                `--------------------------%0A` +
                `Mwalimu, nimeambatanisha picha za kazi yangu hapa chini:`;

            window.open(`https://wa.me/${phone}?text=${text}`, '_blank');

            if (!completedSubjects.has(sub)) {
                completedSubjects.add(sub);
                btn.classList.add('done');
                btn.innerText = "âœ“ Tayari";
                btn.disabled = true;
                updateProgress();
            }
        }

        function updateProgress() {
            const bar = document.getElementById('progressBar');
            const statusText = document.getElementById('statusText');
            const counterText = document.getElementById('counterText');
            const congrats = document.getElementById('congrats');

            let percent = Math.round((completedSubjects.size / targetNeeded) * 100);
            if (percent > 100) percent = 100;

            bar.style.width = percent + "%";
            bar.innerText = percent + "%";
            statusText.innerText = `Maendeleo: ${percent}%`;
            counterText.innerText = `${completedSubjects.size}/${targetNeeded} Masomo muhimu`;

            if (percent >= 100) {
                bar.style.background = "var(--blue-glow)";
                congrats.style.display = "block";
            } else {
                bar.style.background = "var(--red-glow)";
                congrats.style.display = "none";
            }
        }
    </script>
</body>

</html>